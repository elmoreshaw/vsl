{"ast":null,"code":"'use strict';\n\nvar objectAssign = require('object-assign');\n\nvar Emitter = require('tiny-emitter');\n\nvar Lethargy = require('lethargy').Lethargy;\n\nvar support = require('./support');\n\nvar clone = require('./clone');\n\nvar bindAll = require('bindall-standalone');\n\nvar EVT_ID = 'virtualscroll';\nmodule.exports = VirtualScroll;\nvar keyCodes = {\n  LEFT: 37,\n  UP: 38,\n  RIGHT: 39,\n  DOWN: 40,\n  SPACE: 32\n};\n\nfunction VirtualScroll(options) {\n  bindAll(this, '_onWheel', '_onMouseWheel', '_onTouchStart', '_onTouchMove', '_onKeyDown');\n  this.el = window;\n\n  if (options && options.el) {\n    this.el = options.el;\n    delete options.el;\n  }\n\n  this.options = objectAssign({\n    mouseMultiplier: 1,\n    touchMultiplier: 2,\n    firefoxMultiplier: 15,\n    keyStep: 120,\n    preventTouch: false,\n    unpreventTouchClass: 'vs-touchmove-allowed',\n    limitInertia: false,\n    useKeyboard: true,\n    useTouch: true\n  }, options);\n  if (this.options.limitInertia) this._lethargy = new Lethargy();\n  this._emitter = new Emitter();\n  this._event = {\n    y: 0,\n    x: 0,\n    deltaX: 0,\n    deltaY: 0\n  };\n  this.touchStartX = null;\n  this.touchStartY = null;\n  this.bodyTouchAction = null;\n\n  if (this.options.passive !== undefined) {\n    this.listenerOptions = {\n      passive: this.options.passive\n    };\n  }\n}\n\nVirtualScroll.prototype._notify = function (e) {\n  var evt = this._event;\n  evt.x += evt.deltaX;\n  evt.y += evt.deltaY;\n\n  this._emitter.emit(EVT_ID, {\n    x: evt.x,\n    y: evt.y,\n    deltaX: evt.deltaX,\n    deltaY: evt.deltaY,\n    originalEvent: e\n  });\n};\n\nVirtualScroll.prototype._onWheel = function (e) {\n  var options = this.options;\n  if (this._lethargy && this._lethargy.check(e) === false) return;\n  var evt = this._event; // In Chrome and in Firefox (at least the new one)\n\n  evt.deltaX = e.wheelDeltaX || e.deltaX * -1;\n  evt.deltaY = e.wheelDeltaY || e.deltaY * -1; // for our purpose deltamode = 1 means user is on a wheel mouse, not touch pad\n  // real meaning: https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent#Delta_modes\n\n  if (support.isFirefox && e.deltaMode == 1) {\n    evt.deltaX *= options.firefoxMultiplier;\n    evt.deltaY *= options.firefoxMultiplier;\n  }\n\n  evt.deltaX *= options.mouseMultiplier;\n  evt.deltaY *= options.mouseMultiplier;\n\n  this._notify(e);\n};\n\nVirtualScroll.prototype._onMouseWheel = function (e) {\n  if (this.options.limitInertia && this._lethargy.check(e) === false) return;\n  var evt = this._event; // In Safari, IE and in Chrome if 'wheel' isn't defined\n\n  evt.deltaX = e.wheelDeltaX ? e.wheelDeltaX : 0;\n  evt.deltaY = e.wheelDeltaY ? e.wheelDeltaY : e.wheelDelta;\n\n  this._notify(e);\n};\n\nVirtualScroll.prototype._onTouchStart = function (e) {\n  var t = e.targetTouches ? e.targetTouches[0] : e;\n  this.touchStartX = t.pageX;\n  this.touchStartY = t.pageY;\n};\n\nVirtualScroll.prototype._onTouchMove = function (e) {\n  var options = this.options;\n\n  if (options.preventTouch && !e.target.classList.contains(options.unpreventTouchClass)) {\n    e.preventDefault();\n  }\n\n  var evt = this._event;\n  var t = e.targetTouches ? e.targetTouches[0] : e;\n  evt.deltaX = (t.pageX - this.touchStartX) * options.touchMultiplier;\n  evt.deltaY = (t.pageY - this.touchStartY) * options.touchMultiplier;\n  this.touchStartX = t.pageX;\n  this.touchStartY = t.pageY;\n\n  this._notify(e);\n};\n\nVirtualScroll.prototype._onKeyDown = function (e) {\n  var evt = this._event;\n  evt.deltaX = evt.deltaY = 0;\n  var windowHeight = window.innerHeight - 40;\n\n  switch (e.keyCode) {\n    case keyCodes.LEFT:\n    case keyCodes.UP:\n      evt.deltaY = this.options.keyStep;\n      break;\n\n    case keyCodes.RIGHT:\n    case keyCodes.DOWN:\n      evt.deltaY = -this.options.keyStep;\n      break;\n\n    case keyCodes.SPACE && e.shiftKey:\n      evt.deltaY = windowHeight;\n      break;\n\n    case keyCodes.SPACE:\n      evt.deltaY = -windowHeight;\n      break;\n\n    default:\n      return;\n  }\n\n  this._notify(e);\n};\n\nVirtualScroll.prototype._bind = function () {\n  if (support.hasWheelEvent) this.el.addEventListener('wheel', this._onWheel, this.listenerOptions);\n  if (support.hasMouseWheelEvent) this.el.addEventListener('mousewheel', this._onMouseWheel, this.listenerOptions);\n\n  if (support.hasTouch && this.options.useTouch) {\n    this.el.addEventListener('touchstart', this._onTouchStart, this.listenerOptions);\n    this.el.addEventListener('touchmove', this._onTouchMove, this.listenerOptions);\n  }\n\n  if (support.hasPointer && support.hasTouchWin) {\n    this.bodyTouchAction = document.body.style.msTouchAction;\n    document.body.style.msTouchAction = 'none';\n    this.el.addEventListener('MSPointerDown', this._onTouchStart, true);\n    this.el.addEventListener('MSPointerMove', this._onTouchMove, true);\n  }\n\n  if (support.hasKeyDown && this.options.useKeyboard) document.addEventListener('keydown', this._onKeyDown);\n};\n\nVirtualScroll.prototype._unbind = function () {\n  if (support.hasWheelEvent) this.el.removeEventListener('wheel', this._onWheel);\n  if (support.hasMouseWheelEvent) this.el.removeEventListener('mousewheel', this._onMouseWheel);\n\n  if (support.hasTouch) {\n    this.el.removeEventListener('touchstart', this._onTouchStart);\n    this.el.removeEventListener('touchmove', this._onTouchMove);\n  }\n\n  if (support.hasPointer && support.hasTouchWin) {\n    document.body.style.msTouchAction = this.bodyTouchAction;\n    this.el.removeEventListener('MSPointerDown', this._onTouchStart, true);\n    this.el.removeEventListener('MSPointerMove', this._onTouchMove, true);\n  }\n\n  if (support.hasKeyDown && this.options.useKeyboard) document.removeEventListener('keydown', this._onKeyDown);\n};\n\nVirtualScroll.prototype.on = function (cb, ctx) {\n  this._emitter.on(EVT_ID, cb, ctx);\n\n  var events = this._emitter.e;\n  if (events && events[EVT_ID] && events[EVT_ID].length === 1) this._bind();\n};\n\nVirtualScroll.prototype.off = function (cb, ctx) {\n  this._emitter.off(EVT_ID, cb, ctx);\n\n  var events = this._emitter.e;\n  if (!events[EVT_ID] || events[EVT_ID].length <= 0) this._unbind();\n};\n\nVirtualScroll.prototype.reset = function () {\n  var evt = this._event;\n  evt.x = 0;\n  evt.y = 0;\n};\n\nVirtualScroll.prototype.destroy = function () {\n  this._emitter.off();\n\n  this._unbind();\n};","map":{"version":3,"sources":["/home/grady/Documents/work/Vessel/dApp/vessel-home/node_modules/virtual-scroll/src/index.js"],"names":["objectAssign","require","Emitter","Lethargy","support","clone","bindAll","EVT_ID","module","exports","VirtualScroll","keyCodes","LEFT","UP","RIGHT","DOWN","SPACE","options","el","window","mouseMultiplier","touchMultiplier","firefoxMultiplier","keyStep","preventTouch","unpreventTouchClass","limitInertia","useKeyboard","useTouch","_lethargy","_emitter","_event","y","x","deltaX","deltaY","touchStartX","touchStartY","bodyTouchAction","passive","undefined","listenerOptions","prototype","_notify","e","evt","emit","originalEvent","_onWheel","check","wheelDeltaX","wheelDeltaY","isFirefox","deltaMode","_onMouseWheel","wheelDelta","_onTouchStart","t","targetTouches","pageX","pageY","_onTouchMove","target","classList","contains","preventDefault","_onKeyDown","windowHeight","innerHeight","keyCode","shiftKey","_bind","hasWheelEvent","addEventListener","hasMouseWheelEvent","hasTouch","hasPointer","hasTouchWin","document","body","style","msTouchAction","hasKeyDown","_unbind","removeEventListener","on","cb","ctx","events","length","off","reset","destroy"],"mappings":"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","sourcesContent":["'use strict';\n\nvar objectAssign = require('object-assign');\nvar Emitter = require('tiny-emitter');\nvar Lethargy = require('lethargy').Lethargy;\nvar support = require('./support');\nvar clone = require('./clone');\nvar bindAll = require('bindall-standalone');\nvar EVT_ID = 'virtualscroll';\n\nmodule.exports = VirtualScroll;\n\nvar keyCodes = {\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40,\n    SPACE: 32\n};\n\nfunction VirtualScroll(options) {\n    bindAll(this, '_onWheel', '_onMouseWheel', '_onTouchStart', '_onTouchMove', '_onKeyDown');\n\n    this.el = window;\n    if (options && options.el) {\n        this.el = options.el;\n        delete options.el;\n    }\n    this.options = objectAssign({\n        mouseMultiplier: 1,\n        touchMultiplier: 2,\n        firefoxMultiplier: 15,\n        keyStep: 120,\n        preventTouch: false,\n        unpreventTouchClass: 'vs-touchmove-allowed',\n        limitInertia: false,\n        useKeyboard: true,\n        useTouch: true\n    }, options);\n\n    if (this.options.limitInertia) this._lethargy = new Lethargy();\n\n    this._emitter = new Emitter();\n    this._event = {\n        y: 0,\n        x: 0,\n        deltaX: 0,\n        deltaY: 0\n    };\n    this.touchStartX = null;\n    this.touchStartY = null;\n    this.bodyTouchAction = null;\n\n    if (this.options.passive !== undefined) {\n        this.listenerOptions = {passive: this.options.passive};\n    }\n}\n\nVirtualScroll.prototype._notify = function(e) {\n    var evt = this._event;\n    evt.x += evt.deltaX;\n    evt.y += evt.deltaY;\n\n   this._emitter.emit(EVT_ID, {\n        x: evt.x,\n        y: evt.y,\n        deltaX: evt.deltaX,\n        deltaY: evt.deltaY,\n        originalEvent: e\n   });\n};\n\nVirtualScroll.prototype._onWheel = function(e) {\n    var options = this.options;\n    if (this._lethargy && this._lethargy.check(e) === false) return;\n    var evt = this._event;\n\n    // In Chrome and in Firefox (at least the new one)\n    evt.deltaX = e.wheelDeltaX || e.deltaX * -1;\n    evt.deltaY = e.wheelDeltaY || e.deltaY * -1;\n\n    // for our purpose deltamode = 1 means user is on a wheel mouse, not touch pad\n    // real meaning: https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent#Delta_modes\n    if(support.isFirefox && e.deltaMode == 1) {\n        evt.deltaX *= options.firefoxMultiplier;\n        evt.deltaY *= options.firefoxMultiplier;\n    }\n\n    evt.deltaX *= options.mouseMultiplier;\n    evt.deltaY *= options.mouseMultiplier;\n\n    this._notify(e);\n};\n\nVirtualScroll.prototype._onMouseWheel = function(e) {\n    if (this.options.limitInertia && this._lethargy.check(e) === false) return;\n\n    var evt = this._event;\n\n    // In Safari, IE and in Chrome if 'wheel' isn't defined\n    evt.deltaX = (e.wheelDeltaX) ? e.wheelDeltaX : 0;\n    evt.deltaY = (e.wheelDeltaY) ? e.wheelDeltaY : e.wheelDelta;\n\n    this._notify(e);\n};\n\nVirtualScroll.prototype._onTouchStart = function(e) {\n    var t = (e.targetTouches) ? e.targetTouches[0] : e;\n    this.touchStartX = t.pageX;\n    this.touchStartY = t.pageY;\n};\n\nVirtualScroll.prototype._onTouchMove = function(e) {\n    var options = this.options;\n    if(options.preventTouch\n        && !e.target.classList.contains(options.unpreventTouchClass)) {\n        e.preventDefault();\n    }\n\n    var evt = this._event;\n\n    var t = (e.targetTouches) ? e.targetTouches[0] : e;\n\n    evt.deltaX = (t.pageX - this.touchStartX) * options.touchMultiplier;\n    evt.deltaY = (t.pageY - this.touchStartY) * options.touchMultiplier;\n\n    this.touchStartX = t.pageX;\n    this.touchStartY = t.pageY;\n\n    this._notify(e);\n};\n\nVirtualScroll.prototype._onKeyDown = function(e) {\n    var evt = this._event;\n    evt.deltaX = evt.deltaY = 0;\n    var windowHeight = window.innerHeight - 40\n\n    switch(e.keyCode) {\n        case keyCodes.LEFT:\n        case keyCodes.UP:\n            evt.deltaY = this.options.keyStep;\n            break;\n\n        case keyCodes.RIGHT:\n        case keyCodes.DOWN:\n            evt.deltaY = - this.options.keyStep;\n            break;\n        case keyCodes.SPACE && e.shiftKey:\n            evt.deltaY = windowHeight;\n            break;\n        case keyCodes.SPACE:\n            evt.deltaY = - windowHeight;\n            break;\n        default:\n            return;\n    }\n\n    this._notify(e);\n};\n\nVirtualScroll.prototype._bind = function() {\n    if(support.hasWheelEvent) this.el.addEventListener('wheel', this._onWheel, this.listenerOptions);\n    if(support.hasMouseWheelEvent) this.el.addEventListener('mousewheel', this._onMouseWheel, this.listenerOptions);\n\n    if(support.hasTouch && this.options.useTouch) {\n        this.el.addEventListener('touchstart', this._onTouchStart, this.listenerOptions);\n        this.el.addEventListener('touchmove', this._onTouchMove, this.listenerOptions);\n    }\n\n    if(support.hasPointer && support.hasTouchWin) {\n        this.bodyTouchAction = document.body.style.msTouchAction;\n        document.body.style.msTouchAction = 'none';\n        this.el.addEventListener('MSPointerDown', this._onTouchStart, true);\n        this.el.addEventListener('MSPointerMove', this._onTouchMove, true);\n    }\n\n    if(support.hasKeyDown && this.options.useKeyboard) document.addEventListener('keydown', this._onKeyDown);\n};\n\nVirtualScroll.prototype._unbind = function() {\n    if(support.hasWheelEvent) this.el.removeEventListener('wheel', this._onWheel);\n    if(support.hasMouseWheelEvent) this.el.removeEventListener('mousewheel', this._onMouseWheel);\n\n    if(support.hasTouch) {\n        this.el.removeEventListener('touchstart', this._onTouchStart);\n        this.el.removeEventListener('touchmove', this._onTouchMove);\n    }\n\n    if(support.hasPointer && support.hasTouchWin) {\n        document.body.style.msTouchAction = this.bodyTouchAction;\n        this.el.removeEventListener('MSPointerDown', this._onTouchStart, true);\n        this.el.removeEventListener('MSPointerMove', this._onTouchMove, true);\n    }\n\n    if(support.hasKeyDown && this.options.useKeyboard) document.removeEventListener('keydown', this._onKeyDown);\n};\n\nVirtualScroll.prototype.on = function(cb, ctx) {\n  this._emitter.on(EVT_ID, cb, ctx);\n\n  var events = this._emitter.e;\n  if (events && events[EVT_ID] && events[EVT_ID].length === 1) this._bind();\n};\n\nVirtualScroll.prototype.off = function(cb, ctx) {\n  this._emitter.off(EVT_ID, cb, ctx);\n\n  var events = this._emitter.e;\n  if (!events[EVT_ID] || events[EVT_ID].length <= 0) this._unbind();\n};\n\nVirtualScroll.prototype.reset = function() {\n    var evt = this._event;\n    evt.x = 0;\n    evt.y = 0;\n};\n\nVirtualScroll.prototype.destroy = function() {\n    this._emitter.off();\n    this._unbind();\n};\n"]},"metadata":{},"sourceType":"script"}