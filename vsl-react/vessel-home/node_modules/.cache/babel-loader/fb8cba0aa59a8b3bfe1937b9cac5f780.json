{"ast":null,"code":"var _jsxFileName = \"/home/grady/Documents/work/Vessel/dApp/vessel-home/src/components/pages/Quiz/QuizStageContoller.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport Quiz from './Quiz';\nimport Loader from '../../Loader/Loader';\nimport styled from 'styled-components';\nimport theme from '../../Theme/theme';\nimport GetStartedOverlay from '../../getStartedOverlay/GetStartedOverlay';\nimport QuizResult from './QuizResult'; // import LoadingPage from '../LoadingPage/LoadingPage';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StyledPara = styled.p`\n\tmargin-top: 24px;\n\tfont-weight: bold;\n\ttext-align: center;\n`;\n_c = StyledPara;\nconst StyledLoader = styled.div`\n\twidth: 100vw;\n\theight: 100vh;\n\tbackground-color: ${theme.color.background.primary};\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n`;\n_c2 = StyledLoader;\n\nconst setCookie = (cname, cvalue, exdays) => {\n  const d = new Date();\n  d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);\n  let expires = \"expires=\" + d.toUTCString();\n  document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n};\n\nconst QuizStageContoller = props => {\n  _s();\n\n  // Get initial quiz info and first two pairs of cards\n  const quizId = props.quizId;\n  const [quizInfo, getQuizInfo] = useState(null);\n  useEffect(() => {\n    fetch('https://www.flipic.net/api/quiz/' + quizId).then(response => response.json()).then(data => {\n      // console.log(data);\n      getQuizInfo(data);\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n  }, [quizId]);\n  const [frontPair, setFront] = useState(null);\n  const [backPair, setBack] = useState(null);\n  useEffect(() => {\n    fetch('https://www.flipic.net/api/quiz-matchup/' + quizId).then(response => response.json()).then(data => {\n      // console.log(data);\n      setFront(data);\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n  }, [quizId]);\n  useEffect(() => {\n    fetch('https://www.flipic.net/api/quiz-matchup/' + quizId).then(response => response.json()).then(data => {\n      // console.log(data);\n      setBack(data);\n    }).catch(error => {\n      console.error('Error:', error);\n    });\n  }, [quizId]); // control the when to show the welcome page and the result page \n\n  const [welcomed, setWelcomed] = useState(false);\n\n  const handleWelcomed = () => {\n    setWelcomed(true);\n  };\n\n  const [quizDone, setDone] = useState(false); // if quizDone then set client-side cookie and show result, otherwise show next page\n  // if welcomed then do no show the welcome page, otherwise show welcome page\n\n  if (!quizDone) {\n    if (quizInfo !== null && frontPair !== null && backPair !== null) {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Quiz, {\n          quizInfo: quizInfo,\n          frontPair: frontPair,\n          backPair: backPair,\n          setFront: setFront,\n          setBack: setBack,\n          setDone: setDone\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 6\n        }, this), welcomed ? null : /*#__PURE__*/_jsxDEV(GetStartedOverlay, {\n          handleWelcomed: handleWelcomed,\n          author: quizInfo.data.quizCreator\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true);\n    } else {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: /*#__PURE__*/_jsxDEV(StyledLoader, {\n          children: [/*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(StyledPara, {\n            children: \"Loading...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 6\n        }, this)\n      }, void 0, false) // <LoadingPage />\n      ;\n    }\n  } else {\n    const cname = 'flipic_' + quizInfo.data._id;\n    const value = true;\n    const exdays = 30;\n    setCookie(cname, value, exdays);\n    return /*#__PURE__*/_jsxDEV(QuizResult, {\n      quizId: quizId,\n      didBefore: false,\n      userName: null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 10\n    }, this);\n  }\n};\n\n_s(QuizStageContoller, \"Ldt0GNeJcZVW9VX+GJiJ02j7Cdo=\");\n\n_c3 = QuizStageContoller;\nexport default QuizStageContoller;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"StyledPara\");\n$RefreshReg$(_c2, \"StyledLoader\");\n$RefreshReg$(_c3, \"QuizStageContoller\");","map":{"version":3,"sources":["/home/grady/Documents/work/Vessel/dApp/vessel-home/src/components/pages/Quiz/QuizStageContoller.js"],"names":["React","useEffect","useState","Quiz","Loader","styled","theme","GetStartedOverlay","QuizResult","StyledPara","p","StyledLoader","div","color","background","primary","setCookie","cname","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","document","cookie","QuizStageContoller","props","quizId","quizInfo","getQuizInfo","fetch","then","response","json","data","catch","error","console","frontPair","setFront","backPair","setBack","welcomed","setWelcomed","handleWelcomed","quizDone","setDone","quizCreator","_id","value"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Quiz from './Quiz';\nimport Loader from '../../Loader/Loader';\nimport styled from 'styled-components';\nimport theme from '../../Theme/theme';\nimport GetStartedOverlay from '../../getStartedOverlay/GetStartedOverlay';\nimport QuizResult from './QuizResult';\n// import LoadingPage from '../LoadingPage/LoadingPage';\n\nconst StyledPara = styled.p`\n\tmargin-top: 24px;\n\tfont-weight: bold;\n\ttext-align: center;\n`;\n\nconst StyledLoader = styled.div`\n\twidth: 100vw;\n\theight: 100vh;\n\tbackground-color: ${theme.color.background.primary};\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n`;\n\nconst setCookie = (cname, cvalue, exdays) => {\n\tconst d = new Date();\n\td.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));\n\tlet expires = \"expires=\"+d.toUTCString();\n\tdocument.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n}\n\nconst QuizStageContoller = props => {\n\t// Get initial quiz info and first two pairs of cards\n\tconst quizId = props.quizId;\n\tconst [quizInfo, getQuizInfo] = useState(null);\n\tuseEffect(() => {\n\t\tfetch('https://www.flipic.net/api/quiz/' + quizId)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\t// console.log(data);\n\t\t\t\tgetQuizInfo(data);\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.error('Error:', error);\n\t\t\t});\n\t}, [quizId]);\n\n\tconst [frontPair, setFront] = useState(null);\n\tconst [backPair, setBack] = useState(null);\n\tuseEffect(() => {\n\t\tfetch('https://www.flipic.net/api/quiz-matchup/' + quizId)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\t// console.log(data);\n\t\t\t\tsetFront(data);\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.error('Error:', error);\n\t\t\t});\n\t}, [quizId]);\n\n\tuseEffect(() => {\n\t\tfetch('https://www.flipic.net/api/quiz-matchup/' + quizId)\n\t\t\t.then(response => response.json())\n\t\t\t.then(data => {\n\t\t\t\t// console.log(data);\n\t\t\t\tsetBack(data);\n\t\t\t})\n\t\t\t.catch(error => {\n\t\t\t\tconsole.error('Error:', error);\n\t\t\t});\n\t}, [quizId]);\n\n\n\t// control the when to show the welcome page and the result page \n\tconst [welcomed, setWelcomed] = useState(false);\n\tconst handleWelcomed = () => {\n\t\tsetWelcomed(true);\n\t};\n\tconst [quizDone, setDone] = useState(false);\n\t\n\t// if quizDone then set client-side cookie and show result, otherwise show next page\n\t// if welcomed then do no show the welcome page, otherwise show welcome page\n\tif (!quizDone) {\n\t\tif (quizInfo !== null && frontPair !== null && backPair !== null) {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<Quiz\n\t\t\t\t\t\tquizInfo={quizInfo}\n\t\t\t\t\t\tfrontPair={frontPair}\n\t\t\t\t\t\tbackPair={backPair}\n\t\t\t\t\t\tsetFront={setFront}\n\t\t\t\t\t\tsetBack={setBack}\n\t\t\t\t\t\tsetDone={setDone}\n\t\t\t\t\t/>\n\t\t\t\t\t{welcomed ? null : (\n\t\t\t\t\t\t<GetStartedOverlay handleWelcomed={handleWelcomed} author={quizInfo.data.quizCreator} />\n\t\t\t\t\t)}\n\t\t\t\t</>\n\t\t\t);\n\t\t} else {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<StyledLoader>\n\t\t\t\t\t\t<Loader />\n\t\t\t\t\t\t<StyledPara>Loading...</StyledPara>\n\t\t\t\t\t</StyledLoader>\n\t\t\t\t</>\n\t\t\t\t// <LoadingPage />\n\t\t\t);\n\t\t}\n\t} else {\n\t\tconst cname = 'flipic_' +  quizInfo.data._id;\n\t\tconst value = true;\n\t\tconst exdays = 30;\n\t\tsetCookie(cname, value, exdays);\n\t\treturn <QuizResult quizId={quizId} didBefore={false} userName={null} />;\n\t}\n};\n\nexport default QuizStageContoller;\n"]},"metadata":{},"sourceType":"module"}